<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lottery Chances - Historical Analysis & Probability Prediction</title>

  <!-- React + ReactDOM -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <!-- Babel for JSX in the browser -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Lucide icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
    }
  </style>
</head>
<body class="bg-slate-100">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useMemo } = React;
    const {
      TrendingUp,
      Calendar,
      Hash,
      Percent,
      Database,
      Filter,
      RefreshCw,
      Plus,
      Upload,
      Download,
    } = lucide;

    // --- Default sample data -------------------------------------------------
    function getDefaultDraws() {
      return [
        { drawNumber: "4128", date: "2025-11-10", numbers: [2, 11, 12, 19, 25, 36], additional: 16 },
        { drawNumber: "4127", date: "2025-11-06", numbers: [3, 20, 24, 29, 32, 44], additional: 46 },
        { drawNumber: "4126", date: "2025-11-03", numbers: [10, 19, 22, 34, 39, 43], additional: 35 },
        { drawNumber: "4125", date: "2025-10-30", numbers: [1, 5, 31, 34, 38, 45], additional: 15 },
        { drawNumber: "4124", date: "2025-10-27", numbers: [9, 17, 22, 24, 31, 38], additional: 47 },
        { drawNumber: "4123", date: "2025-10-23", numbers: [3, 10, 14, 29, 31, 46], additional: 12 },
        { drawNumber: "4122", date: "2025-10-20", numbers: [3, 10, 13, 15, 32, 37], additional: 8 },
        { drawNumber: "4121", date: "2025-10-16", numbers: [2, 13, 19, 35, 41, 46], additional: 30 },
        { drawNumber: "4120", date: "2025-10-13", numbers: [2, 5, 19, 28, 34, 46], additional: 31 },
        { drawNumber: "4119", date: "2025-10-09", numbers: [4, 5, 13, 29, 31, 42], additional: 34 },
      ];
    }

    function formatDateDisplay(dateStr) {
      if (!dateStr) return "-";
      const d = new Date(dateStr);
      if (isNaN(d.getTime())) return dateStr;
      return d.toLocaleDateString();
    }

    function App() {
      const [draws, setDraws] = useState([]);
      const [lastUpdated, setLastUpdated] = useState(null);

      const [filter, setFilter] = useState({
        fromDate: "",
        toDate: "",
        number: "",
      });

      const [newDraw, setNewDraw] = useState({
        drawNumber: "",
        date: "",
        numbers: ["", "", "", "", "", ""],
        additional: "",
      });

      const [showAddForm, setShowAddForm] = useState(false);
      const [showFilterForm, setShowFilterForm] = useState(false);
      const [showImportForm, setShowImportForm] = useState(false);
      const [importStatus, setImportStatus] = useState("");

      // --- Load from localStorage on first load ------------------------------
      useEffect(() => {
        try {
          const stored = window.localStorage.getItem("lottery-historical-data");
          if (stored) {
            const parsed = JSON.parse(stored);
            if (Array.isArray(parsed.draws)) {
              setDraws(parsed.draws);
              setLastUpdated(parsed.lastUpdated || null);
              return;
            }
          }
        } catch (e) {
          console.warn("Failed to load data from localStorage", e);
        }

        // If nothing in storage, seed with defaults
        const defaults = getDefaultDraws();
        setDraws(defaults);
        const ts = new Date().toISOString();
        setLastUpdated(ts);
        window.localStorage.setItem(
          "lottery-historical-data",
          JSON.stringify({ draws: defaults, lastUpdated: ts })
        );
      }, []);

      // --- Save to localStorage whenever draws change ------------------------
      useEffect(() => {
        if (!draws || draws.length === 0) return;
        const ts = new Date().toISOString();
        setLastUpdated(ts);
        try {
          window.localStorage.setItem(
            "lottery-historical-d
